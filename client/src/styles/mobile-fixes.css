/* CRITICAL MOBILE FIXES - COMPREHENSIVE SOLUTION */

/* Fix transparent backgrounds on ALL interactive elements */
button,
[role="button"],
.bg-popover,
.bg-background,
.bg-card,
.bg-primary,
.bg-secondary,
.bg-accent,
.bg-muted {
  /* Force solid backgrounds with fallbacks */
  background-color: var(--background, #ffffff) !important;
}

/* Dark mode specific backgrounds */
.dark button,
.dark [role="button"],
.dark .bg-popover,
.dark .bg-background,
.dark .bg-card {
  background-color: var(--card, #18181b) !important;
}

/* Primary buttons need primary colors */
button.bg-primary,
.dark button.bg-primary {
  background-color: var(--primary, #8b5cf6) !important;
}

/* Fix dropdown and popover backgrounds explicitly */
[role="menu"],
[data-radix-popper-content-wrapper],
[data-state="open"],
.z-50 {
  background-color: var(--popover, #ffffff) !important;
  border: 1px solid var(--border, #e4e4e7) !important;
}

.dark [role="menu"],
.dark [data-radix-popper-content-wrapper],
.dark [data-state="open"],
.dark .z-50 {
  background-color: var(--popover, #18181b) !important;
  border: 1px solid var(--border, rgba(255, 255, 255, 0.1)) !important;
}

/* Mobile-specific layout fixes */
@media (max-width: 768px) {
  /* Fix header layout */
  .flex.items-center.justify-between {
    flex-wrap: nowrap !important;
    gap: 8px !important;
  }
  
  /* Fix search bar width */
  input[type="search"],
  input[type="text"] {
    width: 100% !important;
    max-width: 100% !important;
  }
  
  /* Fix button groups */
  .flex.gap-2 {
    flex-wrap: wrap !important;
  }
  
  /* Resource cards - prevent text overlap */
  .line-clamp-2 {
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    max-height: 3em !important;
    line-height: 1.5em !important;
  }
  
  .line-clamp-1 {
    display: -webkit-box !important;
    -webkit-line-clamp: 1 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    max-height: 1.5em !important;
  }
  
  /* Card content spacing */
  .p-4,
  .p-6 {
    padding: 12px !important;
  }
  
  /* Fix badge and tag overflow */
  .text-xs {
    font-size: 10px !important;
    padding: 2px 6px !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    max-width: 80px !important;
  }
  
  /* Fix container padding */
  .container {
    padding-left: 16px !important;
    padding-right: 16px !important;
  }
  
  /* Category dropdown fixes */
  [role="combobox"] {
    width: 100% !important;
    min-height: 44px !important;
    background-color: var(--background, #ffffff) !important;
    border: 1px solid var(--border, #e4e4e7) !important;
  }
  
  .dark [role="combobox"] {
    background-color: var(--card, #18181b) !important;
    border: 1px solid var(--border, rgba(255, 255, 255, 0.1)) !important;
  }
  
  /* Sort dropdown fixes */
  select,
  [role="listbox"] {
    min-height: 44px !important;
    background-color: var(--background, #ffffff) !important;
    border: 1px solid var(--border, #e4e4e7) !important;
    padding: 8px 12px !important;
  }
  
  .dark select,
  .dark [role="listbox"] {
    background-color: var(--card, #18181b) !important;
    border: 1px solid var(--border, rgba(255, 255, 255, 0.1)) !important;
  }
  
  /* Layout grid fixes */
  .grid {
    gap: 12px !important;
  }
  
  .grid-cols-1 {
    grid-template-columns: 1fr !important;
  }
  
  /* Fix floating elements */
  .fixed {
    z-index: 9999 !important;
  }
  
  /* Theme switcher button */
  .bottom-4.right-4 {
    bottom: 20px !important;
    right: 20px !important;
  }
  
  /* Fix icon button sizes */
  button[aria-label],
  button.h-10.w-10 {
    width: 44px !important;
    height: 44px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    background-color: var(--background, #ffffff) !important;
    border: 1px solid var(--border, #e4e4e7) !important;
  }
  
  .dark button[aria-label],
  .dark button.h-10.w-10 {
    background-color: var(--card, #18181b) !important;
    border: 1px solid var(--border, rgba(255, 255, 255, 0.1)) !important;
  }
  
  /* Ensure text is readable */
  * {
    word-break: break-word !important;
  }
  
  /* Fix header stacking */
  header,
  nav {
    min-height: 60px !important;
    padding: 12px 16px !important;
  }
  
  /* Prevent horizontal scroll */
  body,
  html {
    overflow-x: hidden !important;
    max-width: 100vw !important;
  }
  
  /* Fix overlapping elements */
  .absolute {
    position: relative !important;
  }
  
  /* Resource list items */
  .flex.items-start {
    flex-direction: column !important;
    gap: 8px !important;
  }
  
  /* Badge container fixes */
  .flex.flex-wrap {
    max-width: 100% !important;
    overflow: hidden !important;
  }
  
  /* Touch targets */
  a,
  button,
  [role="button"] {
    min-height: 44px !important;
    min-width: 44px !important;
    padding: 8px !important;
  }
}

/* Tablet-specific fixes */
@media (min-width: 768px) and (max-width: 1024px) {
  .container {
    padding-left: 24px !important;
    padding-right: 24px !important;
  }
  
  .grid-cols-2 {
    grid-template-columns: repeat(2, 1fr) !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  button,
  [role="button"],
  [role="menu"],
  .bg-card {
    border: 2px solid currentColor !important;
  }
}

/* Force visible focus states */
*:focus-visible {
  outline: 2px solid var(--ring, #8b5cf6) !important;
  outline-offset: 2px !important;
}

/* Animation performance on mobile */
@media (max-width: 768px) {
  * {
    animation-duration: 0.15s !important;
    transition-duration: 0.15s !important;
  }
}

/* Prevent layout shift */
img,
video,
svg {
  max-width: 100% !important;
  height: auto !important;
}

/* Fix text selection on mobile */
::selection {
  background-color: var(--primary, #8b5cf6) !important;
  color: var(--primary-foreground, #ffffff) !important;
}